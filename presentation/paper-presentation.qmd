---
title: "Community detection in networks: A user guide"
subtitle: "Seminar on Statistical Methods for Network Construction & Analysis"
author: "Maximilian Frei"
institute: "LMU München"
date: "2025-12-16"
format: 
  revealjs:
    css: "../customstyle.css"
    logo: results/LMU_Logo.svg
    embed-resources: true
    self-contained: true
    slide-number: c
    footer: >
      <div style="display: flex; justify-content: space-between; width: 80%;
        margin-left: 10%; margin-right: 10%;">
      <span style="text-align: left;">Community detection in networks: A user guide</span>
      <span style="text-align: center; font-size: 0.7em;"
      >Maximilian Frei</span>
      <span style="text-align: right;">08.12.2025</span>
      </div>
editor: visual
execute:
  echo: false
  warning: false
  message: false
  eval: true
  eval-env: global
---

## Agenda {.custom-smaller}

::: incremental
1.  Background Information

2.  What is a Community?

    2.1 Classic View\
    2.2 Modern View\

3.  Validation

    3.1 Benchmarks\
    3.2 Structure vs Metadata
:::

## Agenda {.custom-smaller}

::: incremental
4.  Detection Methods

    4.1 Spectral Methods\
    4.2 Optimization\
    4.3 Consensus Clustering\
    4.4 Alternatives Overview

5.  Outlook

:::




## 1 Background Information {.chapter-title}

## 1 Background Information

<br>

Identifying communities is arguably the most popular and problematic topic in network science.

<br>

**Challenges in community detection**:

- No universal definition of a community
- Many competing methods
- No standard protocol for validation

## 1 Background Information

<br>

::: {.columns}
::: {.column width="35%"}
#### Goal of the paper

-   Offer critical analysis
-   Expose limits of popular methods
-   Provide robust protocols for detection
:::

::: {.column width="65%"}
![ ](results/fig-0.png)

<span style="font-size: 0.5em; color: gray;">Fig. 0</span>
:::
:::

## 2 What is a Community? {.chapter-title}

## 2.1 Classic View

::: {.columns}
::: {.column width="50%"}
-   Communities as dense subgraphs
-   Clearly separated from the rest of the network
-   Methods are based on edge counting
-   Internal edges > External edges
:::

::: {.column width="50%"}
![ ](results/fig-4.png)

<span style="font-size: 0.5em; color: gray;">Fig. 4</span>
:::
:::


## 2.2 Modern View 

<br>

#### Stochastic Block Model (SBM)

$$P = \begin{bmatrix} p_{in} & p_{out} \\ p_{out} & p_{in} \end{bmatrix}$$


**Assortative**: $p_{in} > p_{out}$ (standard communities)  
**Null model**: $p_{in} = p_{out}$ (Erdős-Rényi)


## 2.2 Modern View 

![ ](results/fig-8.png){width=80%}

<span style="font-size: 0.5em; color: gray;">Fig. 8</span>


## 3 Validation {.chapter-title}

## 3.1 Benchmarks

![ ](results/fig-9.png)

<span style="font-size: 0.5em; color: gray;">Fig. 9</span>

**Girvan-Newman (GN)**:

- Too simple
- equal degree & equal size




## 3.1 Benchmarks

::: {.columns}
::: {.column width="50%"}
![ ](results/fig-10.png)

<span style="font-size: 0.5em; color: gray;">Fig. 10</span>
:::

::: {.column width="50%"}
**LFR Benchmark**:

- Power-law $P(k) \sim k^{-\gamma}$
- Realistic for real networks
:::
:::


## 3.2 Structure vs Metadata

![ ](results/structure_vs_metadata.png)

<span style="font-size: 0.5em; color: gray;">Generated by author</span>

**Interplay**: Structural communities often do not align with metadata

## 4 Detection Methods {.chapter-title}


## 4.1 Spectral Methods

1. Use eigenvalues of graph matrices ($A$ or $L$) to cluster nodes in geometric space.

2. In sparse networks, the "bulk" eigenvalues (noise) merge with the informative eigenvalues (signal). Standard methods fail.

3. The **Non-Backtracking Matrix ($B$)** filters this noise.

4. Count the real eigenvalues outside the spectral circle to find $q$ (number of communities).

## 4.1 Spectral Methods


![ ](results/spec-1.png)

<span style="font-size: 0.5em; color: gray;">Generated by author</span>

## 4.2 Optimization

**Modularity**:

$$Q = \frac{1}{2m} \sum_{ij} \left(A_{ij} - P_{ij}\right) \delta(C_i, C_j)$$

where:

- $A_{ij}$: actual adjacency matrix
- $P_{ij}$: expected edges (configuration model)
- $\delta(C_i, C_j) = 1$ if same community, $0$ otherwise
- $m$: total number of edges


## 4.2 Optimization

![ ](results/fig-24.png){width=80%}

<span style="font-size: 0.5em; color: gray;">Fig. 24</span>

**Null model comparison**: Test $Q$ against random graph distribution

## 4.2 Optimization

<br>

**Problems**:

- Resolution limit (merges small communities)
- Rugged landscape (many local maxima)
- Modularity trap (random graphs can have high $Q$)

## 4.3 Consensus Clustering

::: {.columns}
::: {.column width="50%"}
![ ](results/fig-22.png)

<span style="font-size: 0.5em; color: gray;">Fig. 22</span>
:::

::: {.column width="50%"}
**Consensus Matrix**: $D_{ij} =$ fraction of times nodes $i$ and $j$ appear together

**Process**: Run multiple times → Build consensus → Re-cluster

**Result**: Filters noise, creates stable communities
:::
:::


## 4.4 Alternatives Overview

<br>

::: {.compact-table}
| **Method** | **Key Property** | **Best For** |
|------------|------------------|--------------|
| **Infomap** | Random walk "trapping" | Directed, flow networks |
| **SBM Inference** | Max. Likelihood Estimation | Rigor, prevent overfitting |
| **OSLOM** | Statistical significance | Prevent false positives |
| **Edge Clustering** | Cluster edges not vertices | Overlapping communities |
:::


## 5 Outlook {.chapter-title}

## 5 Outlook

**Recommendations**:

- **No silver bullet**: Method choice depends on network features
- **For Rigor**: SBM Inference or Spectral (Non-backtracking)
- **Stability**: Always use Consensus Clustering
- **Validity**: Test significance against null model
- **Avoid trap**: High modularity $\neq$ real communities



## Appendix - Detectability


**Under which conditions are communities detectable?**

- Signal must exceed noise threshold

$$\langle k_{in}\rangle - \frac{\langle k_{out}\rangle}{q-1} \le \sqrt{\langle k_{in}\rangle + \langle k_{out}\rangle}$$

Below this threshold, **no algorithm** can reliably detect communities.

## Image Sources {.custom-smaller}

<span style="font-size: 0.4em;">

**Fortunato, S., & Hric, D. (2016).** *Community detection in networks: A user guide.* Physics Reports, 659, 1-44.

- Fig. 0: Paper title page
- Fig. 4: Classic view
- Fig. 8: SBM adjacency matrix
- Fig. 9: GN benchmark
- Fig. 10: LFR benchmark
- Fig. 22: Consensus clustering
- Fig. 24: Modularity null model

</span>

## Image Sources {.custom-smaller}

<span style="font-size: 0.4em;">

**Generated by author:**

- Structure vs Metadata
- Spectral eigenvalues (Non-Backtracking Matrix)

</span>